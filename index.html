<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <script src="application.js"></script>
        <script src="csg.js"></script>
        <script src="lightgl.js"></script>
        <script src="viewer.js"></script>
        <script src="http://codeorigin.jquery.com/jquery-2.0.3.min.js"></script>        
        <title>CSG - Web Workers Demo</title>
        <script type="text/javascript" charset="utf-8">
            var myWorker = new Worker("csg_ww.js");

            myWorker.onmessage = function (oEvent) {
                console.log(oEvent);

                if (oEvent.data.id && oEvent.data.message) 
                {
                    $('#'+oEvent.data.id + "_message").append(oEvent.data.message + "<br />");
                }
                else if(oEvent.data.id && oEvent.data.resultSet)
                {
                    var polyhedra = CSG.fromPolygons(oEvent.data.resultSet.polygons);
                    var viewer = new Viewer(polyhedra, 300, 300, 7);
                    $('#'+oEvent.data.id + "_viewer").append(viewer.gl.canvas);
                }    
            };

            $(function () {
                $('#nogables').click(function () {
                    IntersectGables({id: "nogables", type: "union", objects:[]});
                });   
            });

            $(function () {
                $('#onegable').click(function () {
                    IntersectGables({id: "onegable", type: "union", objects:[
                        {type: "Gable", options: {center: [0,0.5,0]}}
                    ]});
                });   
            });

            $(function () {
                $('#fourgables').click(function () {
                    IntersectGables({id: "fourgables", type: "union", objects:[
                        {type: "Gable", options: {}},
                        {type: "Gable", options: {center: [0,0.5,0]}},
                        {type: "Gable", options: {center: [0,1,0]}},
                        {type: "Gable", options: {center: [0,1.5,0]}},
                    ]});
                });   
            });
            
            $(function () {
                $('#thirtytwogables').click(function () {
                    IntersectGables({id: "thirtytwogables", type: "union", objects: MakeObjects(32, false, true) });
                });   
            });

            $(function () {
                $('#sixtyfourgables').click(function () {
                    IntersectGables({id: "sixtyfourgables", type: "union", objects: MakeObjects(64, true, true) });
                });   
            });

            $(function () {
                $('#onetwentyeightgables').click(function () {
                    IntersectGables({id: "onetwentyeightgables", type: "union", objects: MakeObjects(128, true, true) });
                });   
            });

            $(function () {
                $('#nogables_ww').click(function () {
                    myWorker.postMessage({id: "nogables_ww", type: "union", objects:[]});
                });   
            });

            $(function () {
                $('#onegable_ww').click(function () {
                    myWorker.postMessage({id: "onegable_ww", type: "union", objects:[
                        {type: "Gable", options: {center: [0,0.5,0]}}
                    ]});
                });   
            });

            $(function () {
                $('#fourgables_ww').click(function () {
                    myWorker.postMessage({id: "fourgables_ww", type: "union", objects:[
                        {type: "Gable", options: {}},
                        {type: "Gable", options: {center: [0,0.5,0]}},
                        {type: "Gable", options: {center: [0,1,0]}},
                        {type: "Gable", options: {center: [0,1.5,0]}},
                    ]});
                });   
            });
            
            $(function () {
                $('#thirtytwogables_ww').click(function () {
                    myWorker.postMessage({id: "thirtytwogables_ww", type: "union", objects: MakeObjects(32, false, true) });
                });   
            });

            $(function () {
                $('#sixtyfourgables_ww').click(function () {
                    myWorker.postMessage({id: "sixtyfourgables_ww", type: "union", objects: MakeObjects(64, true, true) });
                });   
            });

            $(function () {
                $('#onetwentyeightgables_ww').click(function () {
                    myWorker.postMessage({id: "onetwentyeightgables_ww", type: "union", objects: MakeObjects(128, true, true) });
                });   
            });
        </script>
        <style type="text/css" media="all">
        .button {
            float: left;
        }

        .button_group {
            display: table-row;
        }
        </style>
    </head>
    <body>
        <div style="font-size: 40px">
            Some Text to select.
        </div>
        <div>
            <img src="loading.gif" style="width: 100px; height: 100px" alt="" />
        </div>
        <div class="button_group">
            <div>No Web Workers</div>
            <div class="button">
                <input type="button" name="nogables" id="nogables" value="None" />
                <div class="messages" id="nogables_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="onegable" id="onegable" value="One" />
                <div class="viewer" id="onegable_viewer">
                     
                </div>
                <div class="messages" id="onegable_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="fourgables" id="fourgables" value="Four" />
                <div class="viewer" id="fourgables_viewer">
                     
                </div>
                <div class="messages" id="fourgables_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="thirtytwogables" id="thirtytwogables" value="32" />
                <div class="viewer" id="thirtytwogables_viewer">
                     
                </div>
                <div class="messages" id="thirtytwogables_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="sixtyfourgables" id="sixtyfourgables" value="64" />
                <div class="viewer" id="sixtyfourgables_viewer">
                     
                </div>
                <div class="messages" id="sixtyfourgables_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="onetwentyeightgables" id="onetwentyeightgables" value="128" />
                <div class="viewer" id="onetwentyeightgables_viewer">
                     
                </div>
                <div class="messages" id="onetwentyeightgables_message">
                    
                </div>
            </div>
        </div>
        <br />
        <hr />
        <div class="button_group">
            <div>With Web Workers</div>
            <div class="button">
                <input type="button" name="nogables_ww" id="nogables_ww" value="None" />
                <div class="messages" id="nogables_ww_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="onegable_ww" id="onegable_ww" value="One" />
                <div class="viewer" id="onegable_ww_viewer">
                     
                </div>
                <div class="messages" id="onegable_ww_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="fourgables_ww" id="fourgables_ww" value="Four" />
                <div class="viewer" id="fourgables_ww_viewer">
                     
                </div>
                <div class="messages" id="fourgables_ww_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="thirtytwogables_ww" id="thirtytwogables_ww" value="32" />
                <div class="viewer" id="thirtytwogables_ww_viewer">
                     
                </div>
                <div class="messages" id="thirtytwogables_ww_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="sixtyfourgables_ww" id="sixtyfourgables_ww" value="64" />
                <div class="viewer" id="sixtyfourgables_ww_viewer">
                     
                </div>
                <div class="messages" id="sixtyfourgables_ww_message">
                    
                </div>
            </div>
            <div class="button">
                <input type="button" name="onetwentyeightgables_ww" id="onetwentyeightgables_ww" value="128" />
                <div class="viewer" id="onetwentyeightgables_ww_viewer">
                     
                </div>
                <div class="messages" id="onetwentyeightgables_ww_message">
                    
                </div>
            </div>
        </div>
    </body>
</html>
